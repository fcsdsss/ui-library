if not getgenv().ObelusLibrary then
	local LibraryURL = "https://raw.githubusercontent.com/fcsdsss/ui-library/refs/heads/main/Obelus/ui%20lib/source.lua"
	local success, result = pcall(function() return loadstring(game:HttpGet(LibraryURL))() end)
	if success and result and type(result) == "table" then getgenv().ObelusLibrary = result else warn("Obelus UI Library could not be loaded.", result) return end
end

local Obelus = getgenv().ObelusLibrary

local window = Obelus:Window({ name = "<font color='#AA55EB'>My Awesome Script</font> | v4.0" })

local combatPage = window:Page({Name = "Combat"})
local visualsPage = window:Page({Name = "Visuals"})
local playerPage = window:Page({Name = "Player"})
local miscPage = window:Page({Name = "Misc"})

local combatSectionLeft = combatPage:Section({Name = "General", Side = "Left", size = 280})

combatSectionLeft:Label({Name = "Main combat features:"})
local aimAssistToggle = combatSectionLeft:Toggle({Name = "Aim Assist", Default = true})

local targetPartDropdown = combatSectionLeft:Dropdown({
	Name = "Target Part",
	Options = {"Head", "Torso", "HumanoidRootPart", "Closest Part"},
	Default = "Head",
	Callback = function(selectedOption)
		Obelus:Notify({
			Title = "Target Part Changed",
			Text = "Now targeting player " .. selectedOption .. ".",
			Color = Color3.fromRGB(0, 170, 255)
		})
	end
})

combatSectionLeft:Button({Name = "Test Click Feedback", Callback = function()
	print("Button click feedback works!")
end})

local combatSectionRight = combatPage:Section({Name = "Aim Assist Settings", Side = "Right", size = 280})

local smoothnessSlider = combatSectionRight:Slider({
	Name = "Smoothness",
	Minimum = 0,
	Maximum = 100,
	Default = 25,
	Decimals = 1,
	Suffix = "%",
	Callback = function(value)
		print("Aim Assist Smoothness set to:", value .. "%")
	end
})

combatSectionRight:Slider({
	Name = "FOV Size",
	Minimum = 10,
	Maximum = 500,
	Default = 80,
	Decimals = 10,
	Suffix = "px"
})


local espSection = visualsPage:Section({Name = "Player ESP", Side = "Left", size = 280})
espSection:Toggle({Name = "Box ESP", Default = true})
espSection:Toggle({Name = "Name ESP"})

local targetModeDropdown = espSection:Dropdown({
	Name = "Target Mode",
	Options = {"All Players", "Enemies Only", "Friends Only"},
	Default = "Enemies Only"
})

local espDistanceSlider = espSection:Slider({
	Name = "Max ESP Distance",
	Minimum = 50,
	Maximum = 2000,
	Default = 300,
	Decimals = 0.02,
	Suffix = "m",
	Callback = function(value)
		print("Max ESP distance set to:", value .. "m")
	end
})


local playerSection = playerPage:Section({Name = "Movement", Side = "Left", size = 280})

local walkspeedSlider = playerSection:Slider({
	Name = "WalkSpeed",
	Minimum = 16,  -- 默认速度
	Maximum = 150,
	Default = 16,
	Decimals = 1
})

local jumpPowerSlider = playerSection:Slider({
	Name = "JumpPower",
	Minimum = 50,
	Maximum = 250,
	Default = 50,
	Decimals = 2
})


local miscSection = miscPage:Section({Name = "Miscellaneous", Side = "Left", size = 280})
miscSection:Label({Name = "Other settings and info."})
miscSection:Toggle({Name = "Streamer Mode (Hides UI)", Default = false})
miscSection:Button({Name = "Rejoin Server", Callback = function() print("Rejoining...") end})
miscSection:Button({Name = "Reset All Settings", Callback = function()
	aimAssistToggle:Set(true)
	smoothnessSlider:Set(25)
	walkspeedSlider:Set(16)
	targetPartDropdown:Set("Head")
	Obelus:Notify({Title = "Settings Reset", Text = "All values have been restored to default."})
end})


combatPage:Turn(true)

task.wait(1)
Obelus:Notify({
	Title = "Script Loaded!",
	Text = "Welcome! Obelus v4.0 is active.",
	Duration = 6
})

task.wait(10)
local currentTarget = targetPartDropdown:Get()
print("Current target part after 10s is:", currentTarget)

task.wait(5)
local currentSmoothness = smoothnessSlider:Get()
print(string.format("Current smoothness after 15s is: %d%%", currentSmoothness))

Obelus:Notify({
    Title = "Code Interaction",
    Text = "Setting smoothness to 75% via script...",
    Duration = 4
})
smoothnessSlider:Set(75)
print("Smoothness has been set to 75% by the script.")
