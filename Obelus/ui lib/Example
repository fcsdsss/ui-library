-- === 加载UI库 ===
if not getgenv().ObelusLibrary then
	local LibraryURL = "https://raw.githubusercontent.com/fcsdsss/ui-library/main/Obelus/ui%20lib/source.lua" -- 确保这个URL指向最新的库代码
	local success, result = pcall(function() return loadstring(game:HttpGet(LibraryURL))() end)
	if success and result and type(result) == "table" then 
		getgenv().ObelusLibrary = result 
	else 
		warn("Obelus UI Library could not be loaded.", result) 
		return 
	end
end

local Obelus = getgenv().ObelusLibrary

-- === 创建UI窗口 ===
local window = Obelus:Window({ name = "<font color='#FFFFFF'>My Awesome Script</font> | v4.0" })

-- === 创建页面 ===
local combatPage = window:Page({Name = "Combat"})
local visualsPage = window:Page({Name = "Visuals"})
local playerPage = window:Page({Name = "Player"})
local miscPage = window:Page({Name = "Misc"})

-- === 填充 Combat 页面 ===
local combatSectionLeft = combatPage:Section({Name = "General", Side = "Left", size = 280})
combatSectionLeft:Label({Name = "Main combat features:"})
local aimAssistToggle = combatSectionLeft:Toggle({Name = "Aim Assist", Default = true})
local targetPartDropdown = combatSectionLeft:Dropdown({
	Name = "Target Part",
	Options = {"Head", "Torso", "HumanoidRootPart", "Closest Part"},
	Default = "Head",
	Callback = function(selectedOption)
		Obelus:Notify({
			Title = "Target Part Changed",
			Text = "Now targeting player " .. selectedOption .. ".",
			Color = Color3.fromRGB(0, 170, 255)
		})
	end
})
combatSectionLeft:Button({Name = "Test Notification", Callback = function()
	Obelus:Notify({Title = "Test", Text = "This is a test notification."})
end})

local combatSectionRight = combatPage:Section({Name = "Aim Assist Settings", Side = "Right", size = 280})
local smoothnessSlider = combatSectionRight:Slider({
	Name = "Smoothness",
	Minimum = 0,
	Maximum = 100,
	Default = 25,
	Decimals = 1,
	Suffix = "%",
	Callback = function(value)
		print("Aim Assist Smoothness set to:", value .. "%")
	end
})
combatSectionRight:Slider({
	Name = "FOV Size",
	Minimum = 10,
	Maximum = 500,
	Default = 80,
	Decimals = 10,
	Suffix = "px"
})

-- === 填充 Visuals 页面 ===
local espSection = visualsPage:Section({Name = "Player ESP", Side = "Left", size = 280})
espSection:Toggle({Name = "Box ESP", Default = true})
espSection:Toggle({Name = "Name ESP"})
local targetModeDropdown = espSection:Dropdown({
	Name = "Target Mode",
	Options = {"All Players", "Enemies Only", "Friends Only"},
	Default = "Enemies Only"
})
local espDistanceSlider = espSection:Slider({
	Name = "Max ESP Distance",
	Minimum = 50,
	Maximum = 2000,
	Default = 300,
	Decimals = 0.02,
	Suffix = "m"
})

-- === 填充 Player 页面 ===
local playerSection = playerPage:Section({Name = "Movement", Side = "Left", size = 280})
local walkspeedSlider = playerSection:Slider({
	Name = "WalkSpeed",
	Minimum = 16,
	Maximum = 150,
	Default = 16,
	Decimals = 1
})
local jumpPowerSlider = playerSection:Slider({
	Name = "JumpPower",
	Minimum = 50,
	Maximum = 250,
	Default = 50,
	Decimals = 2
})

-- === 填充 Misc 页面 ===
local miscSection = miscPage:Section({Name = "Miscellaneous", Side = "Left", size = 280})
miscSection:Label({Name = "Other settings and info."})
miscSection:Toggle({Name = "Streamer Mode (Hides UI)", Default = false})
miscSection:Button({Name = "Rejoin Server", Callback = function() print("Rejoining...") end})
miscSection:Button({Name = "Reset All Settings", Callback = function()
	aimAssistToggle:Set(true)
	smoothnessSlider:Set(25)
	walkspeedSlider:Set(16)
	targetPartDropdown:Set("Head")
	Obelus:Notify({Title = "Settings Reset", Text = "All values restored to default."})
end})

-- === 设置UI初始状态 ===
combatPage:Turn(true)

task.wait(1)
Obelus:Notify({
	Title = "Script Loaded!",
	Text = "Welcome! Obelus v4.0 is active.",
	Duration = 6
})
